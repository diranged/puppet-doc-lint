#!/usr/bin/env ruby

require 'puppet-doc-lint'

abort 'puppet-doc-lint: no arguments given ' if ARGV[0].nil?

runner = PuppetDocLint::Runner.new

path = ARGV[0]
if File.directory?(path)
  puppet_files = Dir.glob("#{path}/**/*.pp")
  results = runner.run(puppet_files)
else
  results = runner.run(ARGV)
end

results.each do |result| 
  puts "Class name was: #{result.class_name}"
  puts "File name #{result.file_name}"
  puts "Parameters found #{result.parameters}"
  puts "No documentation error: #{result.no_documentation}"
  puts "Documented parameters found: #{result.documented_parameters}"
  puts "Undocumented parameters found: #{result.undocumented_parameters}"
end
